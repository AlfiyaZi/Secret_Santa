<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Super Secret Santa</title>
	{% load staticfiles %}
	<link rel="stylesheet" href="{% static 'home/style.css' %}">
	<link rel="stylesheet" href="{% static 'home/css/bootstrap.min.css' %}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<script>
		// This is called with the results from from FB.getLoginStatus().
		function statusChangeCallback(response) {
	    	console.log('statusChangeCallback');
	    	console.log(response);
    
    		// The response object is returned with a status field that lets the
    		// app know the current login status of the person.
    	
    		// for FB.getLoginStatus().
    		if (response.status === 'connected') {
      			// Logged into your app and Facebook.
      			// testAPI();

      			// transfer token and redirect to dashboard
      			window.location.href = '/dashboard'

    		} else if (response.status === 'not_authorized') {
      			// The person is logged into Facebook, but not your app.
      			document.getElementById('status').innerHTML = 'Please log ' + 'into this app.';
    		} else {
      			// The person is not logged into Facebook, so we're not sure if
      			// they are logged into this app or not.
      			document.getElementById('status').innerHTML = 'Please log ' + 'into Facebook.';
    		}
  		}

		// This function is called when someone finishes with the Login
		// Button.
	  	function checkLoginState() {
	    	FB.getLoginStatus(function(response) {
	    		console.log(response);
	      		statusChangeCallback(response);
	    	});
	  	}

	  	window.fbAsyncInit = function() {
	  	FB.init({
	    	appId      : '1490918607882331',
	    	cookie     : true,  // enable cookies to allow the server to access 
	                        // the session
	    	xfbml      : true,  // parse social plugins on this page
	    	version    : 'v2.2' // use version 2.2
	  	});

	  	// Now that we've initialized the JavaScript SDK, we call 
	  	// FB.getLoginStatus().  This function gets the state of the
	  	// person visiting this page and can return one of three states to
	  	// the callback you provide.  They can be:
	    // 1. Logged into your app ('connected')
	  	// 2. Logged into Facebook, but not your app ('not_authorized')
	  	// 3. Not logged into Facebook and can't tell if they are logged into
	  	//    your app or not.
	  
	  	// These three cases are handled in the callback function.

		FB.getLoginStatus(function(response) {
	    	statusChangeCallback(response);
	  	});

 	 };

	  // Load the SDK asynchronously
	  (function(d, s, id) {
	    var js, fjs = d.getElementsByTagName(s)[0];
	    if (d.getElementById(id)) return;
	    js = d.createElement(s); js.id = id;
	    js.src = "//connect.facebook.net/en_US/sdk.js";
	    fjs.parentNode.insertBefore(js, fjs);
	  }(document, 'script', 'facebook-jssdk'));

	  // Here we run a very simple test of the Graph API after login is
	  // successful.  See statusChangeCallback() for when this call is made.
	  function testAPI() {
	    console.log('Welcome!  Fetching your information.... ');
	    FB.api('/me', function(response) {
	      console.log('Successful login for: ' + response.name);
	      document.getElementById('status').innerHTML =
	        'Thanks for logging in, ' + response.name + '!';
	    });
  	}
</script>
    <!-- ===========================
    NECESSARY SCRIPTS
    =========================== --> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="static/home/js/evenfly.js"></script>
    <script src="static/home/js/jquery.nicescroll.min.js"></script>
    <script src="static/home/js/wow.min.js"></script>
    <script src="static/home/js/snowstorm-min.js"></script>
    <script>new WOW().init();</script>    
    <!-- ===========================
    STYLESHEETS
    =========================== --> 
    <link rel="stylesheet" href="static/home/css/style.css">
    <link rel="stylesheet" href="static/home/css/responsive.css">
    <link rel="stylesheet" href="static/home/css/animate.css">   
    <!-- ===========================
    FONTS
    =========================== -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,900,600|Pacifico' rel='stylesheet' type='text/css'>
    
</head>
<body>
    <div id="hero">
        <div class="redoverlay">
            <div class="container">
                <div class="row">
                    <div class="herotext">
                        <h2 class="wow zoomInDown" data-wow-duration="3s">Super Secret Santa</h2>
                        <h1 class="wow flipInY">Itâ€™s The time</h1>

                       

                        <p class="wow fadeInUp" data-wow-duration="2s">It can be Christmas Year ROUND!!!</p>

                        <img class="bigbell wow tada infinite" data-wow-duration="30s" src="../static/home/img/bell.png" alt="">
                    </div>

                    <div class="santa wow bounceInDown" data-wow-duration="2s">
                        <img src="../static/home/img/santa.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div><!--HERO SECTION END-->
    <div id="overview" class="container">       
        <!--SECTIONHEAD START-->
        <div class="sectionhead">            
            <h2>Best <span class="highlight">free</span> Secret Santa App Ever!!!!</h2>
            <p>For all your Secret Santa Needs! Get all your friends together and lets get it crackin! Search for what you want courtesy of Amazon! Everything is laid out for you and your friends all you have to do is hit order!</p>
            <hr>
        </div><!--SECTIONHEAD END-->
        
        
    </div><!--OVERVIEW SECTION END-->
	<div class='container'>
		<div class='register'>
			<form action="{% url 'register' %}" method="POST">
				{% csrf_token %}
				<div class='col-lg-6'>
					<h3>Register!</h3>
					<div class='form-group'>
						<label>Name:<input type="text" name="name" placeholder='Name'></label>
					</div>
					<div class='form-group'>
						<label>Username:<input type="text" name="username" placeholder='Username'></label>
					</div>
					<div class='form-group'>
						<label>Password:<input type="password" name="password" placeholder='DingleBerry'></label> 
					</div>
					<div class='form-group'>
						<label>Confirm:<input type="password" name="confirm" placeholder='DingleBerry'></label>
					</div>
		 			<label>Admin Level: 
						<select id="admin" name="admin">
							<option value="user">User</option>
							<option value="host">Host</option>
						</select>
					</label>
					<div class='form-group'>
						<label><button class='btn btn-primary'>Register</button></label>
					</div>
					{% if messages %}
						{% for message in messages %}
							{% if message.extra_tags == 'registration' %}
								<p class="error">{{message}}</p>
							{% endif %}
						{% endfor %}
					{% endif %}
				</div>
			</form>
		</div>
		<div class='login'>
			<form class='form' action="{% url 'login' %}"  method="POST">
				{% csrf_token %}
				<div class='col-lg-6'>
					<h3>Login</h3>
					<div class='form-group'>
						<label>Username:<input type="text" name="username" placeholder='Username'></label>
					</div>
					<div class='form-group'>
						<label>Password:<input type="password" name="password" placeholder='Password'></label>
					</div>
					<div class='form-group'>
						<label><button class='btn btn-primary'>Login</button></label>
					</div>
					{% if messages %}
						{% for message in messages %}
							{% if message.extra_tags == 'login' %}
								<p class="error">{{message}}</p>
							{% endif %}
						{% endfor %}
					{% endif %}
				</div>
			</form><br>
		</div>
		<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
		</fb:login-button>

	</div>

	<div id="status">
	</div>
	<footer class="container text-center">             
        <h2 class="logo">Secret<span class="highlight">Santa</span></h2>
        <img class="santacap" src="../static/home/img/santa_cap.png" alt="">
        <P>Doin big thangs since da wintta of 0-15' ya feelz meh</P>
        <hr>
    </footer><!--FOOTER END-->
</body>
</html>